.TH DBEVENTS_AEIC 1 2007/09/28 "Glenn Thompson, AEIC" "User Commands"
.SH NAME
dbevents_aeic - Display seismic events and waveforms incorporating AEIC extensions to dbevents
.SH SYNOPSIS
.nf
dbevents_aeic [-max_age max_age] [-show_detections] [-title title] [-pf pf] dbname [start [end]]
.fi
.SH DESCRIPTION
\fBdbevents_aeic\fP incorporates all of the functionality of dbevents (type "man dbevents" for more information).
Its command line arguments are exactly the same as dbevents. But there are numerous additional parameters possible
in the parameter file. These control various additional features such as: (i) electronic voice announcement of new events,
(ii) display of pop-up maps (generated by dbrecenteqs), (iii) display of AEIC Shakemaps, (iv) launching of dbloc2 to review events, 
(v) deletion of bad or mislocated events from QDDS, the AEIC Shakemap system and Emergency Operations Centres. 
.LP
\fBdbevents_aeic\fP
has one crucial parameter "use_aeic_extensions". If this is not defined and set to 1, the behaviour of \fBdbevents_aeic\fP
reverts to the BRTT version of dbevents, regardless of what other parameters are set. This is deliberate and may make it practical for BRTT to adopt and maintain dbevents_aeic, and base any future developments on it.
.LP
The basis for \fBdbevents_aeic\fP
is BRTT's 4.9 release of dbevents, written by Danny Harvey. Earlier versions of dbevents had been modified by AEIC staff including Josh Stachnik and Mitch Robinson and tailored for specific purposes. This version merged all previous changes, fixed bugs, such that we only have one version of the source code to maintain and any variations can be controlled simply by setting different parameters. Numerous other features have since been added. Anna Bulanova added option of sorting events by origin time based on 4.11 version of dbevents. 
.SH OPTIONS
These are identical to dbevents. The most useful ones are:
.IP "-max_age max_age"
If this is specified, then it is a time duration,
given as \fI[[[dd:]hh:]mm:]ss\fP, that is used to
determine the earliest origin data that will be displayed
relative to the current time. This option overrides the
\fIstart\fP and \fIend\fP options.
.IP "-pf pf"
Specify alternate parameter file.
.IP "-title title"
Specify window title.
.IP -show_detections
Show detections as well as arrivals.
.IP dbname
This is the name of the database that contains the \fIevent\fP, \fIorigin\fP,
\fIassoc\fP and \fIarrival\fP data. This option is required.
.SH "PARAMETER FILE"
Program parameters are specified in the
\fBdbevents_aeic\fP parameter file. Parameters in this file have been grouped according to function and substantially
documented. All other parameter files will probably have a subset of these parameters.
Parameters native to dbevents are not explained here (type "man dbevents" for more information). Instead, only additional parameters added by AEIC are described here.

.LP Master parameter:
.IP use_aeic_extensions
If this is not defined and set to 1, all aeic extensions to dbevents will be ignored. 

.LP
Audible announcements:
.IP announce_enabled 
Enable voice announcement of new events by setting this to 1. 
audioplayer, soundpath and soundfile also need to be defined. 
.IP usemysrn_mag
If set to 0, all events will be announced.
If set to 1, only events within mysrn (my seismic region number) are announced. 
.IP mysrn
My seismic number region. Set this to 1 for Alaska.
.IP mag_thresh 
If specified, only events with a magnitude larger than mag_thresh will be announced.
.IP audioplayer
There must be a command line executable sound file player to enabled events to be announced. The path must be specified here.
.IP soundpath 
The path to the directory containing the sound files.
.IP soundfile
The filename of a sound file which should be played prior to announcement of each event (e.g. machgun.au). 

.IP list_font 
Specifies the font to use for the earthquake list. If omitted, default is 8pt font.

.LP Magnitude priority:
.IP magnitude_preference_order
An optional table in the form:

magnitude_preference_order	&Tbl{
    ml
    ms
    mb
}

.LP
Nearest Places:
.IP placedb
If this is specified, the origin list will include the distances to the nearest places defined in this database.
.IP neardist
Places further than neardist km from the origin will not be listed.
.IP nplacemax
This is the maximum number of places that will be listed.
.IP always_include
If this parameter is defined, followed by the name of a place that appears in placedb (e.g. Fairbanks)
that place will always appear in the origin list, even if it is greater than neardist km away.

.LP
Delete event from database + delete downstream from QDDS, EOC and Shakemap systems:
.IP delete_script
If this is set, and review_event_enabled is also set as 1, then dbevents_aeic will give the option for the user to delete an event
from QDDS, EOC, recenteqs and ShakeMap systems. This script will be invoked to take care of all deletion operations.
.IP delete_pf
The parameter file to use for the delete_script
.IP delete_options
The options to give for the delete_script, e.g. aes (see its man page)
.IP test_mode
If test_mode is set to 1 (on) then delete_script never gets called.

.LP
Review events:
.IP review_events_enabled
If this is set to 1, the user will be able to right click on an event symbol and review it with dbloc2. Generally, this will only
be desirable for staff while on beeper duty.

.LP 
Shakemaps:
The following are parameters useed for displaying AEIC Shakemaps
.IP shakemapsdir
The path to the directory containing the Shakemap jpeg files.
.IP shakemaps_script 
The script used to parse Shakemap archive html files.
.IP shakemaps_geometry	
The geometry of the pop-up window for displaying the webmap on the screen, e.g. 612X740+0+0

.LP station colours 
.IP station_colours
A table which specifies table colours.

.LP 
Webmaps:
The following are parameters used for displaying webmaps generated by dbrecenteqs.
.IP webmapsdb
If the user wants to be able to see webmaps generated by dbrecenteqs, at least one of webmapsdb and webmapsdir must be set.
webmapsdb is the path to the database monitoring by dbrecenteqs, containing a webmaps table.
The reference should be to the database, not the webmaps table itself.
.IP webmapsdir
If the user wants to be able to see webmaps generated by dbrecenteqs, at least one of webmapsdb and webmapsdir must be set.
webmapsdir is the path to a directory containing gif files created by 'rename_recenteq_gifs.pl'
These are named by origin time rather than evid.
.IP webmaps_geometry
The geometry of the pop-up window for displaying the webmap on the screen, e.g. 400x400+0+0

.SH BUGS AND CAVEATS
Like dbevents, dbevents_aeic sometimes hangs, and its possible that additional bugs may have been introduced
.SH AUTHOR
In chronological order: Josh Stachnik, Mitch Robinson, Glenn Thompson, Anna Bulanova
.br
Alaska Earthquake Information Center

